<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    label {
      font-size: large;
      color: #262728;
      padding-top: 20px;
      padding-bottom: 5px;

    }

    .formbold-mb-5 {
      margin-bottom: 20px;
    }

    .formbold-pt-3 {
      padding-top: 12px;
    }

    .formbold-main-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 48px;
    }

    .formbold-form-wrapper {
      margin: 0 auto;
      max-width: 550px;
      width: 100%;
      background: white;
    }

    .formbold-form-label {
      display: block;
      font-weight: 500;
      font-size: 16px;
      color: #07074d;
      margin-bottom: 12px;
    }

    .formbold-form-label-2 {
      font-weight: 600;
      font-size: 20px;
      margin-bottom: 20px;
    }

    .formbold-form-input {
      width: 100%;
      padding: 12px 24px;
      border-radius: 6px;
      border: 1px solid #e0e0e0;
      background: white;
      font-weight: 500;
      font-size: 16px;
      color: #6b7280;
      outline: none;
      resize: none;
    }

    .formbold-form-input:focus {
      border-color: #6a64f1;
      box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
    }

    .formbold-btn {
      text-align: center;
      font-size: 16px;
      border-radius: 6px;
      padding: 14px 32px;
      border: none;
      font-weight: 600;
      background-color: #6a64f1;
      color: white;
      cursor: pointer;
    }

    .formbold-btn:hover {
      box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
    }

    .formbold--mx-3 {
      margin-left: -12px;
      margin-right: -12px;
    }

    .formbold-px-3 {
      padding-left: 12px;
      padding-right: 12px;
    }

    .flex {
      display: flex;
    }

    .flex-wrap {
      flex-wrap: wrap;
    }

    .w-full {
      width: 100%;
    }

    .formbold-file-input input {
      opacity: 0;
      position: absolute;
      width: 100%;
      padding: 20px;
      height: 100%;
    }

    .formbold-file-input label {
      position: relative;
      border: 1px dashed #e0e0e0;
      border-radius: 6px;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 25px;
      text-align: center;
    }

    .formbold-drop-file {
      display: block;
      font-weight: 600;
      color: #07074d;
      font-size: 20px;
      margin-bottom: 8px;
    }

    .formbold-or {
      font-weight: 500;
      font-size: 16px;
      color: #6b7280;
      display: block;
      margin-bottom: 8px;
    }

    .formbold-browse {
      font-weight: 500;
      font-size: 16px;
      color: #07074d;
      display: inline-block;
      padding: 8px 28px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
    }

    .formbold-file-list {
      border-radius: 6px;
      background: #f5f7fb;
      padding: 16px 32px;
    }

    .formbold-file-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .formbold-file-item button {
      color: #07074d;
      border: none;
      background: transparent;
      cursor: pointer;
    }

    .formbold-file-name {
      font-weight: 500;
      font-size: 16px;
      color: #07074d;
      padding-right: 12px;
      padding: 20px;
    }

    .formbold-progress-bar {
      margin-top: 20px;
      position: relative;
      width: 100%;
      height: 6px;
      border-radius: 8px;
      background: #e2e5ef;
    }

    .formbold-progress {
      position: absolute;
      width: 75%;
      height: 100%;
      left: 0;
      top: 0;
      background: #6a64f1;
      border-radius: 8px;
    }

    @media (min-width: 540px) {
      .sm\:w-half {
        width: 50%;
      }
    }

    * {
      box-sizing: border-box;
    }

    :root {
      --clr-white: rgb(255, 255, 255);
      --clr-black: rgb(0, 0, 0);
      --clr-light: rgb(245, 248, 255);
      --clr-light-gray: rgb(196, 195, 196);
      --clr-blue: rgb(63, 134, 255);
      --clr-light-blue: rgb(171, 202, 255);
    }

      {
        {
        !-- body {
          margin: 0;
          padding: 0;
          background-color: var(--clr-light);
          color: var(--clr-black);
          font-family: 'Poppins', sans-serif;
          font-size: 1.125rem;
          min-height: 100vh;
          display: flex;
          justify-content: center;
          align-items: center;
        }

        --
      }
    }

    /* End General Styles */
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  {{!-- multiple image preview --}}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body>
  <div class="container">
    <div style="margin-top: 60px;padding: 20px;" class="formbold-main-wrapper container">
      <!-- Author: FormBold Team -->
      <!-- Learn More: https://formbold.com -->
      <div style="width:100%;" class="formbold-form-wrapper">
        <form action="/admin/edit-product/{{data._id}}" method="POST" id="edit-product-form">
          <h4 style="text-align: center;">Edit Products</h4>
          <div style="padding: 30px;" class="formbold-mb-5">
            <label style="color: #262728;">Name of Product</label>
            <span class="text-danger" id="product-name-error"></span>
            <input type="text" name="product" id="product" placeholder="Enter your Product" class="formbold-form-input"
              value="{{data.product}}" />

            <label style="color: #262728;">Category</label>
            <br>
            <span class="text-danger" id="category-name-error"></span>
            <select name="category" id="category">
              {{#each categorydata}}
              <option value="{{this.category}}">{{this.category}}</option>
              {{/each}}
            </select>
            <br>
            <label style="color: #262728;">Quantity</label>
            <span class="text-danger" id="quantity-name-error"></span>
            <input value="{{data.quantity}}" type="number" name="quantity" id="quantity" placeholder="Price of Product"
              class="formbold-form-input" />

            <label style="color: #262728;">Status</label>
            <span class="text-danger" id="status-name-error"></span>
            <select name="status" id="status">
              <option value="{{this.status}}">{{data.status}}</option>
              <option value="out of stock">Out of stock</option>
              <option value="low stock">Low stock</option>
              <option value="published">Published</option>
            </select>
            <br>
            <label style="color: #262728;">Description</label>
            <span class="text-danger" id="description-name-error"></span>
            <input value="{{data.description}}" type="text" name="description" id="description"
              placeholder="description of product" class="formbold-form-input" />
            <label style="color: #262728;">Price</label>
            <span class="text-danger" id="price-name-error"></span>
            <input value="{{data.price}}" type="number" name="price" id="price" placeholder="Price of Product"
              class="formbold-form-input" />
            <label style="color: #262728;">Discount</label>
            <span class="text-danger" id="discount-name-error"></span>
            <input value="{{data.discount}}" type="number" name="discount" id="discount"
              placeholder="Discount of product" class="formbold-form-input" />
            <button style="height: auto;width: auto;" type="submit" class="btn btn-secondary">Submit</button><br>




        </form>
        <form action="/admin/edit-proimage/{{data._id}}" method="POST" enctype="multipart/form-data" id="edit">
          <label for="">Edit Image</label><br>

          <img style="height: 50px;width: 50px;" src="/images/{{data.image}}" alt=""><br>
          <input type="file" id="gallery-photo-add" name="image">


          <img style="height: 50px;width: 50px;" id='imagepreview1'>
          <input type="submit">
        </form>
        <label for="">Edit Multipple Images</label>
        <br>
        {{#each data.subImage}}

        <a href="/admin/deleteMultImg/{{../data._id}}/{{this}}">
          <img src="/images/{{this}}" alt="" style="width: 50px;height: 50px;">
        </a>
        {{/each}}
        <form action="/admin/Multi-image/{{data._id}}" method="POST" enctype="multipart/form-data">
          <br><label for="">Multipple Images</label><br>

          <input name="image" type="file" multiple class="form-control-file" onchange="loadFile(event)">
          <div style="height: 50px;width: 50px;" id="cont"></div>
          <button type="submit">submit</button>
        </form>
      </div>
    </div>
  </div>
  {{!-- ******************************************Multiple images*********************************** --}}
  {{!-- <div class="container">
    <form action="/admin/Multi-image/{{data._id}}" method="POST" enctype="multipart/form-data">
      <h3 style="color: blue;text-align: center;">Upload Multiple Image </h3>
      <div class="container">
        <div class="row mx-0 justify-content-center">
          <div class="col-md-7 col-lg-5 px-lg-2 col-xl-4 px-xl-0 px-xxl-3">

            <label class="d-block mb-4">
              <span class="form-label d-block">Your photo</span>
              <input name="image" multiple type="file" class="form-control" />
            </label>

            <div class="mb-3">
              <button type="submit" class="btn btn-primary px-3 rounded-3">
                Upload
              </button>
            </div>


          </div>
        </div>
      </div>

    </form>
  </div> --}}


</body>

</html>
<script>

  document.getElementById("edit-product-form").addEventListener('submit', (e) => {

    var product = document.getElementById("product").value;
    document.getElementById("product-name-error").innerHTML;
    if (product === '') {
      document.getElementById("product-name-error").innerHTML = 'This field is required'
      e.preventDefault()
    }


    var category = document.getElementById("category").value
    document.getElementById("category-name-error").innerHTML;
    if (category === '') {
      document.getElementById("category-name-error").innerHTML = "This field is required"
      e.preventDefault()
    }


    var description = document.getElementById("description").value
    document.getElementById("description-name-error").innerHTML;
    if (description === '') {
      document.getElementById("description-name-error").innerHTML = "This field is required"
      e.preventDefault()
    }


    var price = document.getElementById("price").value;
    document.getElementById("price-name-error").innerHTML;
    if (price === '') {
      document.getElementById("price-name-error").innerHTML = 'This field is required'
      e.preventDefault()
    }


    else if (price <= 0) {
      document.getElementById("price-name-error").innerHTML = "price should not be negative"
      e.preventDefault()
    }

    var discount = document.getElementById("discount").value
    document.getElementById("discount-name-error").innerHTML;
    if (discount === '') {
      document.getElementById("discount-name-error").innerHTML = "This field is required"
      e.preventDefault()
    }

    else if (discount >= price) {
      document.getElementById("discount-name-error").innerHTML = "Discount greaterthan price "
      e.preventDefault()
    }

    var quantity = document.getElementById("quantity").value
    document.getElementById("quantity").innerHTML;
    if (quantity === '') {
      document.getElementById("quantity-name-error").innerHTML = "This field is required"
      e.preventDefault()
    }

    else if (quantity < 0) {
      document.getElementById("quantity-name-error").innerHTML = "quantity lessthan zero "
      e.preventDefault()
    }
    var status = document.getElementById("status").value
    document.getElementById("status-name-error").innerHTML;
    if (status === '') {
      document.getElementById("status-name-error").innerHTML = "This field is required"
      e.preventDefault()
    }



    $(function () {
      // Multiple images preview in browser
      var imagesPreview = function (input, placeToInsertImagePreview) {

        if (input.files) {
          var filesAmount = input.files.length;

          for (i = 0; i < filesAmount; i++) {
            var reader = new FileReader();

            reader.onload = function (event) {
              $($.parseHTML('<img>')).attr('src', event.target.result).appendTo(placeToInsertImagePreview);
            }

            reader.readAsDataURL(input.files[i]);
          }
        }

      };

      $('#gallery-photo-add').on('change', function () {
        imagesPreview(this, 'div.gallery');
      });
    });
  })



  $(document).ready(function () {

    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
          $('#imagepreview1').prop('src', e.target.result).show();
        }
        reader.readAsDataURL(input.files[0]);
      }
    }

    $("#gallery-photo-add").change(function () {
      readURL(this);
      $('#imagepreview1').show();
    });

    $('#imagepreview1').click(function () {
      $('#gallery-photo-add').replaceWith($('#gallery-photo-add').clone(true));
      $('#imagepreview1').hide();
    });

  });

  
  var loadFile = function (event) {
    var imgCont = document.getElementById("cont");
    for (let i = 0; i < event.target.files.length; i++) {
      var divElm = document.createElement('div');
      divElm.id = "rowdiv" + i;
      var spanElm = document.createElement('span');
      var image = document.createElement('img');
      image.src = URL.createObjectURL(event.target.files[i]);
      image.id = "output" + i;
      image.width = "200";
      spanElm.appendChild(image);
      var deleteImg = document.createElement('p');
      deleteImg.innerHTML = "x";
      deleteImg.onclick = function () { this.parentNode.remove() };
      divElm.appendChild(spanElm);
      divElm.appendChild(deleteImg);
      imgCont.appendChild(divElm);
    }
  };
</script>